# Stock Science - è‚¡ç¥¨ç­–ç•¥åˆ†æç³»ç»Ÿ

## å…¨å±€è¯´æ˜

æœ¬é¡¹ç›®ç»è¿‡ä¼˜åŒ–å‡çº§ï¼Œæ·»åŠ äº†è½»é‡çº§æ”¹è¿›æ–¹æ¡ˆå’Œç¼“å­˜æœºåˆ¶ï¼Œæå‡äº†ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿç¨³å®šæ€§ã€‚

### æ ¸å¿ƒå‡çº§
- âœ… æ·»åŠ æœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼ˆ24å°æ—¶è¿‡æœŸï¼‰
- âœ… æ·»åŠ APIç®€å•é‡è¯•ï¼ˆå¤±è´¥é‡è¯•1æ¬¡ï¼‰
- âœ… æ·»åŠ è¿›åº¦æ˜¾ç¤ºåŠŸèƒ½
- âœ… æ·»åŠ ç»“æœè‡ªåŠ¨ä¿å­˜åˆ°CSV
- âœ… æ·»åŠ ç®€å•ç»Ÿè®¡æŠ¥å‘Š
- âœ… ä¿ç•™åŸå§‹å¹¶å‘é€Ÿåº¦ï¼ˆ8çº¿ç¨‹ï¼Œæ— é™æµï¼‰
- âœ… ç®€å•é”™è¯¯å¤„ç†æœºåˆ¶

### æ¨èä½¿ç”¨
- **StockPre**: ä½¿ç”¨ `stockPre.py`ï¼ˆå·²é›†æˆç¼“å­˜æœºåˆ¶ï¼‰
- **StockGrain**: ä½¿ç”¨ `stock_grain_ranking/main.py`ï¼ˆå·²é›†æˆç¼“å­˜æœºåˆ¶ï¼‰

### ç‰ˆæœ¬å†å²

- v1.2 (2026-02-07): æ·»åŠ æœ¬åœ°ç¼“å­˜æœºåˆ¶å’ŒAPIé‡è¯•
  - æ–°å¢ `cache_manager.py` ç¼“å­˜ç®¡ç†æ¨¡å—
  - æ–°å¢ `data_resilient.py` å¸¦é‡è¯•çš„æ•°æ®è·å–æ¨¡å—
  - é›†æˆç¼“å­˜æœºåˆ¶åˆ° `stockPre.py` å’Œ `stock_grain_ranking/data.py`
  - ç¼“å­˜24å°æ—¶è¿‡æœŸï¼ŒAPIå¤±è´¥è‡ªåŠ¨é‡è¯•1æ¬¡
  - ç¼“å­˜å‘½ä¸­æ—¶é€Ÿåº¦æå‡90%+
- v1.1 (2026-02-07): æ·»åŠ è½»é‡çº§æ”¹è¿›æ–¹æ¡ˆ
- v1.0 (2026-02-07): åˆå§‹ç‰ˆæœ¬

---

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºæŠ€æœ¯åˆ†æçš„è‚¡ç¥¨ç­–ç•¥ç³»ç»Ÿï¼ŒåŒ…å«ä¸¤ä¸ªä¸»è¦æ¨¡å—ï¼š
- **StockPre**: æ²ªæ·±300æˆåˆ†è‚¡ç­›é€‰ç³»ç»Ÿ
- **Stock Grain Ranking**: å¤šç»´è¯„åˆ†è‚¡ç¥¨åˆ†æç³»ç»Ÿ

## æ–‡ä»¶è¯´æ˜

### æ¨èä½¿ç”¨æ–‡ä»¶ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

| æ–‡ä»¶ | è¯´æ˜ | ç”¨é€” |
|------|------|------|
| [stockPre.py](stockPre.py) | StockPreåŸå§‹ç‰ˆæœ¬ | åŸºç¡€ç‰ˆæœ¬ |
| [stockPre_lite.py](stockPre_lite.py) | StockPreè½»é‡çº§æ”¹è¿›ç‰ˆ | **æ¨èä½¿ç”¨** â­ |
| [stock_grain_ranking/main.py](stock_grain_ranking/main.py) | StockGrainåŸå§‹ç‰ˆæœ¬ | åŸºç¡€ç‰ˆæœ¬ |
| [stock_grain_ranking/main_lite.py](stock_grain_ranking/main_lite.py) | StockGrainè½»é‡çº§æ”¹è¿›ç‰ˆ | **æ¨èä½¿ç”¨** â­ |

### Benchmarkæ–‡æ¡£

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| [BENCHMARK.md](stock_grain_ranking/BENCHMARK.md) | Stock Grain Rankingç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š |
| [STOCKPRE_BENCHMARK.md](STOCKPRE_BENCHMARK.md) | StockPreç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š |

### é¡¹ç›®ç»“æ„

```
stockScience/
â”œâ”€â”€ stockPre.py                      # StockPreåŸå§‹ç‰ˆæœ¬ï¼ˆå·²é›†æˆç¼“å­˜ï¼‰
â”œâ”€â”€ stockPre_lite.py                 # StockPreè½»é‡çº§æ”¹è¿›ç‰ˆ
â”œâ”€â”€ stock_grain_ranking/
â”‚   â”œâ”€â”€ main.py                      # StockGrainåŸå§‹ç‰ˆæœ¬ï¼ˆå·²é›†æˆç¼“å­˜ï¼‰
â”‚   â”œâ”€â”€ main_lite.py                 # StockGrainè½»é‡çº§æ”¹è¿›ç‰ˆ
â”‚   â”œâ”€â”€ data.py                      # æ•°æ®è·å–æ¨¡å—ï¼ˆå·²é›†æˆç¼“å­˜ï¼‰
â”‚   â”œâ”€â”€ indicators.py                 # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”‚   â”œâ”€â”€ signals.py                    # ä¿¡å·ç”Ÿæˆæ¨¡å—
â”‚   â””â”€â”€ backtest.py                   # å›æµ‹æ¨¡å—
â”œâ”€â”€ cache_manager.py                 # ç¼“å­˜ç®¡ç†æ¨¡å— â­
â”œâ”€â”€ data_resilient.py                # å¸¦é‡è¯•çš„æ•°æ®è·å–æ¨¡å— â­
â”œâ”€â”€ cache/                          # ç¼“å­˜ç›®å½•
â”‚   â”œâ”€â”€ stock/                       # è‚¡ç¥¨æ•°æ®ç¼“å­˜
â”‚   â”œâ”€â”€ macro/                       # å®è§‚æ•°æ®ç¼“å­˜
â”‚   â””â”€â”€ .gitignore                   # å¿½ç•¥ç¼“å­˜æ–‡ä»¶
â”œâ”€â”€ stockRanking.py                  # è‚¡ç¥¨æ’åæ¨¡å—
â”œâ”€â”€ requirements.txt                  # Pythonä¾èµ–
â”œâ”€â”€ README.md                       # æœ¬æ–‡ä»¶
â”œâ”€â”€ BENCHMARK.md                     # StockGrain BenchmarkæŠ¥å‘Š
â””â”€â”€ STOCKPRE_BENCHMARK.md             # StockPre BenchmarkæŠ¥å‘Š
```

## ä½¿ç”¨æŒ‡å—

### ç¼“å­˜æœºåˆ¶è¯´æ˜ â­

æœ¬é¡¹ç›®å·²é›†æˆæœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼Œå¤§å¹…æå‡æ•°æ®è·å–é€Ÿåº¦å’Œç¨³å®šæ€§ï¼š

**ç¼“å­˜ç‰¹ç‚¹**:
- ğŸš€ **é€Ÿåº¦æå‡**: ç¼“å­˜å‘½ä¸­æ—¶é€Ÿåº¦æå‡90%+
- ğŸ’¾ **è‡ªåŠ¨ç¼“å­˜**: é¦–æ¬¡è¿è¡Œåè‡ªåŠ¨ä¿å­˜æ•°æ®
- â° **è‡ªåŠ¨è¿‡æœŸ**: ç¼“å­˜24å°æ—¶åè‡ªåŠ¨å¤±æ•ˆ
- ğŸ”„ **æ™ºèƒ½é‡è¯•**: APIå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•1æ¬¡
- ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯**: å¯æŸ¥çœ‹ç¼“å­˜ä½¿ç”¨æƒ…å†µ

**ç¼“å­˜ç®¡ç†**:
```python
from cache_manager import CacheManager

# æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
stats = CacheManager.get_cache_stats()
print(f"è‚¡ç¥¨ç¼“å­˜æ•°: {stats['stock_cache_count']}")
print(f"å®è§‚æ•°æ®ç¼“å­˜æ•°: {stats['macro_cache_count']}")
print(f"æ€»å¤§å°: {stats['total_size_mb']} MB")

# æ¸…ç†è¿‡æœŸç¼“å­˜
CacheManager.clear_expired_cache()

# æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
CacheManager.clear_all_cache()
```

### StockPreç³»ç»Ÿ

#### åŸå§‹ç‰ˆæœ¬
```bash
python stockPre.py
```

#### è½»é‡çº§æ”¹è¿›ç‰ˆï¼ˆæ¨èï¼‰â­
```bash
python stockPre_lite.py
```

**ç‰¹ç‚¹**:
- âœ… è¿›åº¦æ˜¾ç¤ºï¼ˆæ¯5åªè‚¡ç¥¨æ˜¾ç¤ºä¸€æ¬¡ï¼‰
- âœ… ç»“æœè‡ªåŠ¨ä¿å­˜åˆ°CSV
- âœ… ç®€å•ç»Ÿè®¡æŠ¥å‘Šï¼ˆæˆåŠŸ/å¤±è´¥æ•°é‡ã€æ€»ç”¨æ—¶ã€å¹³å‡é€Ÿåº¦ï¼‰
- âœ… ä¿ç•™åŸå§‹å¹¶å‘é€Ÿåº¦ï¼ˆ8çº¿ç¨‹ï¼Œæ— é™æµï¼‰
- âœ… ç®€å•é”™è¯¯å¤„ç†

### Stock Grain Rankingç³»ç»Ÿ

#### åŸå§‹ç‰ˆæœ¬
```bash
cd stock_grain_ranking
python main.py -s 600489 601088 -b 20240207 -e 20260207
```

#### è½»é‡çº§æ”¹è¿›ç‰ˆï¼ˆæ¨èï¼‰â­
```bash
cd stock_grain_ranking
python main_lite.py -s 600489 601088 -b 20240207 -e 20260207
```

**ç‰¹ç‚¹**:
- âœ… è¿›åº¦æ˜¾ç¤ºï¼ˆæ¯5åªè‚¡ç¥¨æ˜¾ç¤ºä¸€æ¬¡ï¼‰
- âœ… ç®€å•ç»Ÿè®¡æŠ¥å‘Šï¼ˆæ€»ç”¨æ—¶ã€å¹³å‡é€Ÿåº¦ï¼‰
- âœ… ä¿ç•™åŸå§‹å¹¶å‘é€Ÿåº¦
- âœ… ç®€å•é”™è¯¯å¤„ç†

## æŠ€æœ¯æ ˆ

- Python 3.9
- pandas 2.2.3
- numpy 1.23.5
- akshare 1.16.61
- pandas-ta 0.3.14b0

## åŠŸèƒ½ç‰¹æ€§

### StockPreç³»ç»Ÿ
- æ²ªæ·±300æˆåˆ†è‚¡å…¨é‡æ‰«æ
- å¤šæ¡ä»¶ä¹°å…¥ä¿¡å·ç­›é€‰ï¼ˆè‡³å°‘æ»¡è¶³2ä¸ªæ¡ä»¶ï¼‰
- æŠ€æœ¯æŒ‡æ ‡ï¼šå‡çº¿ã€MACDã€RSIã€BOLLã€æˆäº¤é‡
- ç­–ç•¥å›æµ‹éªŒè¯
- æŒ‰æ”¶ç›Šç‡æ’åºè¾“å‡º

### Stock Grain Rankingç³»ç»Ÿ
- å¤šç»´è¯„åˆ†ç³»ç»Ÿï¼ˆä¹°å…¥è¯„åˆ† + å–å‡ºå‹åŠ›ï¼‰
- åŠ¨æ€é˜ˆå€¼è°ƒæ•´æœºåˆ¶
- å®è§‚æ•°æ®é›†æˆï¼ˆCPIã€GDPã€PMIã€æ±‡ç‡ï¼‰
- å¹¶å‘å¤„ç†ï¼ˆ8çº¿ç¨‹ï¼‰

## ä¾èµ–å®‰è£…

```bash
pip install -r requirements.txt
```

## BenchmarkæŠ¥å‘Š

è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œæ€§èƒ½åˆ†æè¯·æŸ¥çœ‹ï¼š
- [BENCHMARK.md](stock_grain_ranking/BENCHMARK.md) - Stock Grain Rankingç³»ç»Ÿ
- [STOCKPRE_BENCHMARK.md](STOCKPRE_BENCHMARK.md) - StockPreç³»ç»Ÿ

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

**æœ€åæ›´æ–°**: 2026-02-07
